@page "/"

@rendermode InteractiveServer
@using System.ComponentModel.DataAnnotations
@using BlazorTodoApp.Services
@using BlazorTodoApp.Models
@inject TodoService TodoService

<PageTitle>Home</PageTitle>

<EditForm Model="newTodoItem" OnValidSubmit="HandleSubmit">
    <div>
        <label for="">Title</label>
        <InputText @bind-Value="newTodoItem.Title" />
    </div>
    <div>
        <label for="">Description</label>
        <InputTextArea @bind-Value="newTodoItem.Description" />
    </div>
    <div>
        <label for="">Due Date</label>
        <InputDate @bind-Value="newTodoItem.DueDate"/>
    </div>
    <button type="submit">Submit</button>
</EditForm>

<ul>
    @foreach (var todo in TodoService.GetTodos())
    {
        <li>@todo.Title</li>
    }
</ul>

@code {
   private TodoItem newTodoItem = new TodoItem();

   private void HandleSubmit() {
        TodoService.AddTodo(newTodoItem);

        newTodoItem = new TodoItem();
   }
}
